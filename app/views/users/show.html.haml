- title "Grundprofil för #{@user.displayname}"
%section.box.show.user{ class: admin_or_myself? ? "edit-controls" : ""}
  %h1.box-title= h1
  .box-content.form-horizontal
    - unless myself?
      .colleagueship
        - if @colleagueship.present?
          %button.btn.btn-mini.remove{ data: { "colleagueship-id" => @colleagueship.id, "path" => colleagueships_path, "user-id" => @user.id }} Följer
        - else
          %button.btn.btn-primary.btn-mini.add{ data: { path: colleagueships_path, "user-id" => @user.id }} Följ

    = form_for @user, html: { id: "user-edit-in-place", class: "form-horizontal",
        data: { "tmpl-path" => edit_user_path(@user) }} do |f|

      %h2.form-group-title.summary Sammanfattning

      .control-group.readonly
        .control-label Namn:
        .controls
          = "#{@user.first_name} #{@user.last_name}"
          %button.btn.btn-mini.info Info

      .control-group.editable
        .control-label Visitkortstitel:
        .controls#business_card_title
          = @user.business_card_title
          %button.btn.btn-mini.change Ändra

      .control-group.readonly
        .control-label HR-titel:
        .controls
          = @user.title
          %button.btn.btn-mini.info Info

      .control-group.readonly
        .control-label Enhet/arbetsplats:
        .controls
          = 'AD-fält?'
          %button.btn.btn-mini.info Info

      .control-group.readonly
        .control-label Avdelning:
        .controls
          - if @user.department.present?
            = link_to @user.department, users_path(department: @user.department)
          %button.btn.btn-mini.info Info

      .control-group.readonly
        .control-label Förvaltning:
        .controls
          - if @user.company.present?
            = link_to @user.company_short, users_path(company: @user.company)
          %button.btn.btn-mini.info Info

      .control-group.editable
        .control-label Min status:
        .controls#status_message
          = @user.status_message
          %button.btn.btn-mini.change{ "data-edit-id" => "user_status_message" } Ändra

      .control-group.editable
        .control-label Profilbild:
        .controls
          - if admin_or_myself?
            = link_to "Ändra", edit_avatar_path(@user), class: "change-avatar btn btn-mini"
          = image_tag @user.avatar.url(:medium), alt: "Profilbild"

      %h2.form-group-title Kontakt
      .control-group.readonly
        .control-label E-post:
        .controls
          = @user.email
          %button.btn.btn-mini.info Info

      .control-group.readonly
        .control-label Fast telefon:
        .controls
          = @user.phone
          %button.btn.btn-mini.info Info

      .control-group.readonly
        .control-label Mobiltelefon:
        .controls
          = @user.cell_phone
          %button.btn.btn-mini.info Info

      .control-group.editable
        .control-label Twitter:
        .controls#twitter
          - if @user.twitter.present?
            = link_to "@#{@user.twitter}", "https://twitter.com/#{@user.twitter}"
          %button.btn.btn-mini.change{ "data-edit-id" => "user_status_twitter" } Ändra

      .control-group.editable
        .control-label Skype:
        .controls#skype
          = @user.skype
          %button.btn.btn-mini.change{ "data-edit-id" => "user_status_skype" } Ändra

      %h2.form-group-title Organisation

      .control-group.readonly
        .control-label HR-titel:
        .controls
          = @user.title
          %button.btn.btn-mini.info Info

      .control-group.readonly
        .control-label Enhet/arbetsplats:
        .controls
          = 'AD-fält?'
          %button.btn.btn-mini.info Info

      .control-group.readonly
        .control-label Avdelning:
        .controls
          - if @user.department.present?
            = link_to @user.department, users_path(department: @user.department)
          %button.btn.btn-mini.info Info

      .control-group.readonly
        .control-label Förvaltning:
        .controls
          - if @user.company.present?
            = link_to @user.company_short, users_path(company: @user.company)
          %button.btn.btn-mini.info Info

      .control-group.readonly
        .control-label Rapporterar till:
        .controls
          - if @user.manager.present?
            = link_to @user.manager.displayname, user_path(@user.manager.username)
          - else
            = "#{possessive(@user.displayname)} chef har inte loggat in på min sida än"
          %button.btn.btn-mini.info Info

      .control-group.readonly
        .control-label Linjechef till:
        .controls
          %ul
            - @user.subordinates.each do |subordinate|
              %li= link_to subordinate.displayname, user_path(subordinate.username)
          %button.btn.btn-mini.info Info

      %h2.form-group-title Adress
      .control-group.readonly
        .control-label Besöksadress:
        .controls
          = "AD-fält?"
          %button.btn.btn-mini.info Info

      .control-group.readonly
        .control-label Postadress:
        .controls
          = "AD-fält?"
          %button.btn.btn-mini.info Info

      %h2.form-group-title Nyckelord

      .control-group.editable
        .control-label Kunskapsområden:
        .controls#skill_list
          = @user.skills.map(&:name).join(", ")
          %button.btn.btn-mini.change{ "data-edit-id" => "user_skills" } Ändra

      .control-group.editable
        .control-label Ansvarsområden:
        .controls#responsibility_list
          = @user.responsibilities.map(&:name).join(", ")
          %button.btn.btn-mini.change{ "data-edit-id" => "user_responsibilities" } Ändra

      %h2.form-group-title Övrigt
      .control-group.readonly
        .control-label Användarnamn:
        .controls
          = @user.username
          %button.btn.btn-mini.info Info

      .control-group.editable
        .control-label Grundprofil i Komin:
        .controls#roles
          = @user.roles.map(&:name).to_sentence
          %button.btn.btn-mini.change{ "data-edit-id" => "user_roles" } Ändra

      .control-group.editable
        .control-label Administratör:
        .controls#admin
          = @user.admin? ? "Ja" : "Nej"
          - if admin?
            %button.btn.btn-mini.change{ "data-edit-id" => "user_admin" } Ändra

      .control-group.editable
        .control-label Early adopter:
        .controls#early_adopter
          = @user.early_adopter? ? "Ja" : "Nej"
          - if admin?
            %button.btn.btn-mini.change{ "data-edit-id" => "user_early_adopter" } Ändra

      .control-group.readonly
        .control-label Senast inloggad:
        - if @user.last_login.blank?
          .controls –
        - else
          .controls= l @user.last_login, format: :short

      .control-group.readonly
        .control-label Användaren skapades:
        .controls= l @user.created_at, format: :short

      %h2.form-group-title Personsligt
      .control-group.editable
        .control-label Om mig, personlig bio:
        .controls#private_bio
          = simple_format @user.private_bio
          %button.btn.btn-mini.change{ "data-edit-id" => "user_private_bio" } Ändra

      .control-group.editable
        .control-label Språkkunskaper:
        .controls#language_list
          = @user.languages.map(&:name).to_sentence.humanize
          %button.btn.btn-mini.change{ "data-edit-id" => "user_languages" } Ändra

      .control-group.editable
        .control-label Privat hemsida:
        - if @user.homepage.present?
          .controls#homepage
            = link_to @user.homepage, @user.homepage
            %button.btn.btn-mini.change{ "data-edit-id" => "user_homepage" } Ändra

      %h2.form-group-title Kominaktiviteter
      .control-group.readonly
        .control-label Nyheter:
        .controls= link_to "Visa nyheter", "http://webapps04.malmo.se/nyheter/author/#{@user.username}"

      .control-group.readonly
        .control-label Blogginlägg:
        .controls= link_to "Visa blogginlägg", "http://webapps04.malmo.se/blogg/author/#{@user.username}"

      - if admin_or_myself?
        .actions.change-profile= link_to "Redigera profil", edit_user_path(@user), class: "btn btn-small"
